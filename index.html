<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì•„ë¹  ìƒì¼ ê²Œì„</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes float {
            0%, 100% { transform: translateY(100vh) rotate(0deg); }
            50% { transform: translateY(-20vh) rotate(180deg); }
        }
        .animate-float {
            animation: float linear infinite;
            pointer-events: none;
            z-index: 1;
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
            20%, 40%, 60%, 80% { transform: translateX(10px); }
        }
        .animate-shake {
            animation: shake 0.5s infinite;
        }
        @keyframes credits {
            from { transform: translateY(100vh); }
            to { transform: translateY(-100%); }
        }
        .animate-credits {
            animation: credits linear forwards;
        }
        .hearts-hud {
            position: fixed;
            top: 50%;
            right: 16px;
            transform: translateY(-50%);
            z-index: 9999;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(8px);
            padding: 16px 12px;
            border-radius: 9999px;
            border: 2px solid rgba(59, 130, 246, 0.3);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            font-size: 28px;
            pointer-events: none;
            display: flex;
            flex-direction: column;
            gap: 4px;
        }
        @keyframes money-rain {
            0% { transform: translateY(-100px) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0.8; }
        }
        .money-rain {
            animation: money-rain linear infinite;
            pointer-events: none;
        }
        .sound-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 10000;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(8px);
            padding: 12px;
            border-radius: 50%;
            border: 2px solid rgba(59, 130, 246, 0.3);
            cursor: pointer;
            font-size: 24px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .sound-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
        }
    </style>
</head>
<body>
    <div id="app"></div>

    <script>
        const CORRECT_ANSWERS = {
            0: '0820',
            1: 'í”¼ìŠ¤íƒ€ì¹˜ì˜¤',
            2: '2016',
            3: 'LG',
            4: 'ì˜ˆë¯¼í•¨',
            5: 'ë§¥ì£¼',
            6: 'ìŠ¹ì•„',
            7: 'í•œìˆ¨',
            8: 'ê±´ê°•',
            9: 'ì‚¬ë‘í•©ë‹ˆë‹¤'
        };

        const MESSAGE_DURATION = 15000;

        let state = {
            screen: 'landing',
            hearts: 10,
            hoverText: false,
            showButtons: false,
            noButtonPos: { x: 0, y: 0 },
            yesButtonScale: 1,
            showConfetti: false,
            floatingEmojis: [],
            currentQuestion: 0,
            q0Answer: '',
            showCongratsButton: false,
            showMessage: false,
            creditsFinished: false,
            showGiftMessage: false,
            showGiftDetails: false,
            soundEnabled: true,
            musicEnabled: true
        };

        // Sound effects using Web Audio API
        const AudioContext = window.AudioContext || window.webkitAudioContext;
        const audioContext = new AudioContext();

        // Background music setup
        let backgroundMusicGain = null;
        let backgroundMusicNodes = [];
        let musicInterval = null;

        function createBackgroundMusic() {
            if (!state.musicEnabled || backgroundMusicNodes.length > 0) return;

            // Resume audio context if suspended
            if (audioContext.state === 'suspended') {
                audioContext.resume();
            }

            // Create a gain node for background music volume control
            backgroundMusicGain = audioContext.createGain();
            backgroundMusicGain.gain.setValueAtTime(0.15, audioContext.currentTime);
            backgroundMusicGain.connect(audioContext.destination);

            // Happy Birthday melody - normal tempo, energetic game style!
            const melody = [
                // "Happy Birthday to you" (first line)
                { note: 523.25, duration: 0.3 },  // C5 - Hap-
                { note: 523.25, duration: 0.2 },  // C5 - py
                { note: 587.33, duration: 0.5 },  // D5 - Birth-
                { note: 523.25, duration: 0.5 },  // C5 - day
                { note: 698.46, duration: 0.5 },  // F5 - to
                { note: 659.25, duration: 0.8 },  // E5 - you
                
                // "Happy Birthday to you" (second line)
                { note: 523.25, duration: 0.3 },  // C5 - Hap-
                { note: 523.25, duration: 0.2 },  // C5 - py
                { note: 587.33, duration: 0.5 },  // D5 - Birth-
                { note: 523.25, duration: 0.5 },  // C5 - day
                { note: 783.99, duration: 0.5 },  // G5 - to
                { note: 698.46, duration: 0.8 },  // F5 - you
                
                // Energetic game-style fill
                { note: 880.00, duration: 0.15 }, // A5
                { note: 783.99, duration: 0.15 }, // G5
                { note: 659.25, duration: 0.15 }, // E5
                
                // "Happy Birthday dear [name]" (third line) - octave up for energy!
                { note: 1046.5, duration: 0.3 },  // C6 - Hap-
                { note: 1046.5, duration: 0.2 },  // C6 - py
                { note: 1174.7, duration: 0.5 },  // D6 - Birth-
                { note: 1046.5, duration: 0.5 },  // C6 - day
                { note: 880.00, duration: 0.5 },  // A5 - dear
                { note: 698.46, duration: 0.5 },  // F5 - Dad-
                { note: 659.25, duration: 0.8 },  // E5 - dy
                
                // Power chord fill
                { note: 783.99, duration: 0.15 }, // G5
                { note: 880.00, duration: 0.15 }, // A5
                { note: 1046.5, duration: 0.15 }, // C6
                
                // "Happy Birthday to you" (finale)
                { note: 932.33, duration: 0.3 },  // A#5 - Hap-
                { note: 932.33, duration: 0.2 },  // A#5 - py
                { note: 880.00, duration: 0.5 },  // A5 - Birth-
                { note: 698.46, duration: 0.5 },  // F5 - day
                { note: 783.99, duration: 0.5 },  // G5 - to
                { note: 698.46, duration: 0.6 },  // F5 - you
                
                // Victory ending - ascending celebration!
                { note: 523.25, duration: 0.2 },  // C5
                { note: 659.25, duration: 0.2 },  // E5
                { note: 783.99, duration: 0.2 },  // G5
                { note: 1046.5, duration: 0.6 }   // C6 - big finish!
            ];

            let currentTime = audioContext.currentTime;
            
            melody.forEach((note, index) => {
                const osc = audioContext.createOscillator();
                const noteGain = audioContext.createGain();
                
                // Use square wave for more retro game-like sound
                osc.type = 'square';
                osc.frequency.setValueAtTime(note.note, currentTime);
                
                // Sharper envelope for more energetic feel
                noteGain.gain.setValueAtTime(0, currentTime);
                noteGain.gain.linearRampToValueAtTime(0.25, currentTime + 0.02);
                noteGain.gain.linearRampToValueAtTime(0.18, currentTime + note.duration * 0.5);
                noteGain.gain.linearRampToValueAtTime(0, currentTime + note.duration);
                
                osc.connect(noteGain);
                noteGain.connect(backgroundMusicGain);
                
                osc.start(currentTime);
                osc.stop(currentTime + note.duration);
                
                backgroundMusicNodes.push(osc);
                
                currentTime += note.duration;
            });

            // Calculate total duration and schedule next loop
            const totalDuration = melody.reduce((sum, note) => sum + note.duration, 0);
            
            musicInterval = setTimeout(() => {
                backgroundMusicNodes = [];
                if (state.musicEnabled) {
                    createBackgroundMusic();
                }
            }, totalDuration * 1000);
        }

        function stopBackgroundMusic() {
            backgroundMusicNodes.forEach(node => {
                try {
                    node.stop();
                } catch (e) {
                    // Node may already be stopped
                }
            });
            backgroundMusicNodes = [];
            
            if (musicInterval) {
                clearTimeout(musicInterval);
                musicInterval = null;
            }
            
            if (backgroundMusicGain) {
                backgroundMusicGain.disconnect();
                backgroundMusicGain = null;
            }
        }

        function toggleMusic() {
            state.musicEnabled = !state.musicEnabled;
            playSound('click');
            
            if (state.musicEnabled) {
                createBackgroundMusic();
            } else {
                stopBackgroundMusic();
            }
            
            render();
        }

        function playSound(type) {
            if (!state.soundEnabled) return;
            
            // Resume audio context if it's suspended (due to browser autoplay policies)
            if (audioContext.state === 'suspended') {
                audioContext.resume();
            }

            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);

            switch(type) {
                case 'click':
                    // Short beep for button clicks
                    oscillator.frequency.setValueAtTime(400, audioContext.currentTime);
                    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.1);
                    break;

                case 'correct':
                    // Cheerful ascending notes
                    oscillator.frequency.setValueAtTime(523, audioContext.currentTime); // C5
                    oscillator.frequency.setValueAtTime(659, audioContext.currentTime + 0.1); // E5
                    oscillator.frequency.setValueAtTime(784, audioContext.currentTime + 0.2); // G5
                    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.4);
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.4);
                    break;

                case 'wrong':
                    // Descending notes for wrong answer
                    oscillator.type = 'square';
                    oscillator.frequency.setValueAtTime(400, audioContext.currentTime);
                    oscillator.frequency.setValueAtTime(300, audioContext.currentTime + 0.1);
                    oscillator.frequency.setValueAtTime(200, audioContext.currentTime + 0.2);
                    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.3);
                    break;

                case 'heartLoss':
                    // Heart breaking sound
                    oscillator.type = 'sawtooth';
                    oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
                    oscillator.frequency.exponentialRampToValueAtTime(100, audioContext.currentTime + 0.3);
                    gainNode.gain.setValueAtTime(0.4, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.3);
                    break;

                case 'success':
                    // Victory fanfare
                    const notes = [523, 659, 784, 1047]; // C5, E5, G5, C6
                    notes.forEach((freq, i) => {
                        const osc = audioContext.createOscillator();
                        const gain = audioContext.createGain();
                        osc.connect(gain);
                        gain.connect(audioContext.destination);
                        osc.frequency.setValueAtTime(freq, audioContext.currentTime + i * 0.15);
                        gain.gain.setValueAtTime(0.2, audioContext.currentTime + i * 0.15);
                        gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + i * 0.15 + 0.3);
                        osc.start(audioContext.currentTime + i * 0.15);
                        osc.stop(audioContext.currentTime + i * 0.15 + 0.3);
                    });
                    return; // Skip the default oscillator cleanup

                case 'fail':
                    // Game over sound
                    oscillator.type = 'sawtooth';
                    oscillator.frequency.setValueAtTime(200, audioContext.currentTime);
                    oscillator.frequency.exponentialRampToValueAtTime(50, audioContext.currentTime + 1);
                    gainNode.gain.setValueAtTime(0.4, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 1);
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 1);
                    break;

                case 'hover':
                    // Subtle hover sound
                    oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
                    gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.05);
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.05);
                    break;

                case 'celebration':
                    // Celebration sound with multiple tones
                    for (let i = 0; i < 5; i++) {
                        setTimeout(() => {
                            const osc = audioContext.createOscillator();
                            const gain = audioContext.createGain();
                            osc.connect(gain);
                            gain.connect(audioContext.destination);
                            osc.frequency.setValueAtTime(400 + Math.random() * 600, audioContext.currentTime);
                            gain.gain.setValueAtTime(0.2, audioContext.currentTime);
                            gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
                            osc.start(audioContext.currentTime);
                            osc.stop(audioContext.currentTime + 0.2);
                        }, i * 100);
                    }
                    return;

                case 'money':
                    // Cash register sound
                    oscillator.type = 'sine';
                    oscillator.frequency.setValueAtTime(1000, audioContext.currentTime);
                    oscillator.frequency.setValueAtTime(1200, audioContext.currentTime + 0.05);
                    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.2);
                    break;
            }
        }

        function toggleSound() {
            state.soundEnabled = !state.soundEnabled;
            playSound('click');
            render();
        }

        function initFloatingEmojis() {
            const emojis = [];
            const emojiList = ['ğŸ‚', 'ğŸ‰', 'ğŸ', 'ğŸˆ', 'ğŸŠ', 'ğŸ°', 'ğŸ¥³'];
            
            for (let i = 0; i < 25; i++) {
                let left, top;
                let attempts = 0;
                const maxAttempts = 50;
                
                do {
                    left = Math.random() * 100;
                    top = Math.random() * 100;
                    attempts++;
                    
                    const isInHUDZone = (left > 70 && top < 15);
                    
                    if (!isInHUDZone || attempts >= maxAttempts) {
                        break;
                    }
                } while (attempts < maxAttempts);
                
                emojis.push({
                    id: i,
                    emoji: emojiList[Math.floor(Math.random() * emojiList.length)],
                    left: left,
                    top: top,
                    delay: Math.random() * 5,
                    duration: 15 + Math.random() * 10,
                    size: 20 + Math.random() * 40
                });
            }
            state.floatingEmojis = emojis;
        }

        function renderFloatingEmojis() {
            return state.floatingEmojis.map(function(item) {
                return '<div class="absolute opacity-20 animate-float" style="left: ' + item.left + '%; top: ' + item.top + '%; animation-delay: ' + item.delay + 's; animation-duration: ' + item.duration + 's; font-size: ' + item.size + 'px;">' + item.emoji + '</div>';
            }).join('');
        }

        function renderHearts() {
            var hearts = '';
            for (var i = 0; i < state.hearts; i++) {
                hearts += '<div>ğŸ’™</div>';
            }
            return '<div class="hearts-hud">' + hearts + '</div>';
        }

        function renderSoundToggle() {
            return '<div class="sound-toggle" onclick="toggleSound()" title="' + (state.soundEnabled ? 'ì†Œë¦¬ ë„ê¸°' : 'ì†Œë¦¬ ì¼œê¸°') + '">' + (state.soundEnabled ? 'ğŸ”Š' : 'ğŸ”‡') + '</div>' + 
                   '<div class="sound-toggle" onclick="toggleMusic()" style="top: 80px;" title="' + (state.musicEnabled ? 'ìŒì•… ë„ê¸°' : 'ìŒì•… ì¼œê¸°') + '">' + (state.musicEnabled ? 'ğŸµ' : 'ğŸ¶') + '</div>';
        }

        function handleNoProximity(e) {
            if (state.hearts <= 0) return;
            
            playSound('hover');
            
            const button = e.target;
            const rect = button.getBoundingClientRect();
            const maxX = window.innerWidth - rect.width - 20;
            const maxY = window.innerHeight - rect.height - 20;
            
            state.noButtonPos = {
                x: Math.random() * maxX,
                y: Math.random() * maxY
            };
            state.yesButtonScale += 0.25;
            state.hearts = Math.max(0, state.hearts - 1);
            
            playSound('heartLoss');
            
            if (state.hearts === 0) {
                setTimeout(() => {
                    state.screen = 'fail';
                    playSound('fail');
                    render();
                }, 300);
            } else {
                render();
            }
        }

        function handleNoClick() {
            playSound('wrong');
            alert("ì˜¤ë¥˜: ë‹¤ì‹œ ìƒê°í•´ë³´ì„¸ìš”!");
        }

        function handleYesClick() {
            playSound('celebration');
            state.screen = 'game';
            state.showConfetti = true;
            render();
            
            setTimeout(function() {
                state.showConfetti = false;
                render();
            }, 3000);
        }

        function handleAnswer(questionNum, answer) {
            const correct = CORRECT_ANSWERS[questionNum];
            
            if (answer === correct) {
                playSound('correct');
                if (questionNum === 9) {
                    state.showCongratsButton = true;
                } else {
                    state.currentQuestion = questionNum + 1;
                }
                render();
            } else {
                playSound('wrong');
                state.hearts = Math.max(0, state.hearts - 1);
                
                if (state.hearts > 0) {
                    playSound('heartLoss');
                }
                
                if (state.hearts === 0) {
                    setTimeout(function() {
                        state.screen = 'fail';
                        playSound('fail');
                        render();
                    }, 300);
                } else {
                    render();
                }
            }
        }

        function handleTitleHover() {
            playSound('hover');
            state.hoverText = true;
            state.showButtons = true;
            render();
        }

        function submitQ0() {
            playSound('click');
            handleAnswer(0, state.q0Answer);
        }

        function showMessage() {
            playSound('success');
            state.screen = 'success';
            state.showMessage = true;
            render();
            
            setTimeout(function() {
                state.creditsFinished = true;
                render();
            }, MESSAGE_DURATION);
        }

        function showGiftMessage() {
            playSound('celebration');
            state.showGiftMessage = true;
            render();
        }

        function showGiftDetails() {
            playSound('money');
            state.showGiftDetails = true;
            render();
        }

        function renderLandingScreen() {
            var html = '<div class="min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center relative overflow-hidden">';
            html += renderFloatingEmojis();
            html += renderHearts();
            html += renderSoundToggle();
            html += '<div class="text-center z-10 px-4">';
            html += '<h1 class="text-6xl font-bold text-blue-600 mb-12 cursor-pointer transition-all duration-300" onmouseenter="handleTitleHover()">';
            html += state.hoverText ? 'ê²Œì„ì„ ì‹œì‘í•©ë‹ˆë‹¤' : 'ì•„ë¹  ì•ˆë…•í•˜ì„¸ìš”';
            html += '</h1>';
            
            if (state.showButtons) {
                html += '<div class="flex gap-6 justify-center items-center">';
                html += '<button onclick="handleYesClick()" class="bg-blue-500 hover:bg-blue-600 text-white font-bold text-2xl px-12 py-6 rounded-full shadow-lg transition-all duration-200 hover:shadow-2xl z-20" style="transform: scale(' + state.yesButtonScale + ');">ë„¤! ğŸ‰</button>';
                html += '<button onmouseenter="handleNoProximity(event)" onclick="handleNoClick()" class="bg-gray-300 hover:bg-gray-400 text-gray-700 font-bold text-2xl px-12 py-6 rounded-full shadow-lg transition-all duration-200 z-20" style="position: ' + (state.noButtonPos.x || state.noButtonPos.y ? 'fixed' : 'relative') + '; left: ' + (state.noButtonPos.x ? state.noButtonPos.x + 'px' : 'auto') + '; top: ' + (state.noButtonPos.y ? state.noButtonPos.y + 'px' : 'auto') + '; transition: left 0.3s ease, top 0.3s ease;">ì•„ë‹ˆìš” ğŸ˜¢</button>';
                html += '</div>';
            }
            
            html += '</div></div>';
            return html;
        }

        function renderGameScreen() {
            var html = '<div class="min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 p-8 relative overflow-hidden flex items-center justify-center">';
            html += renderFloatingEmojis();
            html += renderSoundToggle();
            
            if (state.showConfetti) {
                html += '<div class="absolute inset-0 pointer-events-none z-50">';
                for (var i = 0; i < 80; i++) {
                    var emojis = ['ğŸ‚', 'ğŸ‰', 'ğŸ', 'ğŸˆ', 'ğŸŠ'];
                    html += '<div class="absolute animate-bounce" style="left: ' + (Math.random() * 100) + '%; top: -' + (Math.random() * 20) + '%; animation-delay: ' + (Math.random() * 2) + 's; animation-duration: ' + (2 + Math.random() * 3) + 's; font-size: ' + (15 + Math.random() * 15) + 'px;">' + emojis[Math.floor(Math.random() * 5)] + '</div>';
                }
                html += '</div>';
            }

            html += renderHearts();
            html += '<div class="max-w-2xl mx-auto bg-white/80 backdrop-blur rounded-3xl shadow-xl p-8 relative z-10">';
            
            if (state.showCongratsButton) {
                html += '<div class="text-center space-y-8">';
                html += '<h1 class="text-4xl font-bold text-blue-600">ì¶•í•˜í•©ë‹ˆë‹¤! ëª¨ë“  ë¬¸ì œë¥¼ í†µê³¼í–ˆìŠµë‹ˆë‹¤. ğŸ‰</h1>';
                html += '<p class="text-2xl text-gray-700">ë©”ì‹œì§€ê°€ ìˆìŠµë‹ˆë‹¤...</p>';
                html += '<button onclick="showMessage()" class="bg-blue-500 text-white px-12 py-6 rounded-full text-2xl font-bold hover:bg-blue-600 shadow-2xl animate-bounce">ë©”ì‹œì§€ ì½ê¸° ğŸ’Œ</button>';
                html += '</div>';
            } else {
                html += '<h1 class="text-4xl font-bold text-blue-600 text-center mb-8">ìƒì¼ í€´ì¦ˆ ê²Œì„</h1>';
                html += '<div class="space-y-8">';
                
                if (state.currentQuestion === 0) {
                    html += '<div class="space-y-4"><p class="text-2xl font-semibold text-gray-800">ğŸ‚ ë”¸ ìƒì¼ì€?</p>';
                    html += '<input type="text" maxlength="4" id="q0-input" value="' + state.q0Answer + '" placeholder="XXXX" class="w-full px-6 py-4 text-2xl border-2 border-blue-300 rounded-xl focus:border-blue-500 focus:outline-none text-center" />';
                    html += '<button onclick="submitQ0()" class="w-full bg-blue-500 text-white py-4 rounded-xl text-xl font-bold hover:bg-blue-600 transition">ì œì¶œ</button></div>';
                } else if (state.currentQuestion === 1) {
                    html += '<div class="space-y-4"><p class="text-2xl font-semibold text-gray-800">ğŸ¦ ì—„ë§ˆê°€ ì œì¼ ì¢‹ì•„í•˜ëŠ” ì•„ì´ìŠ¤í¬ë¦¼ ë§›ì€?</p>';
                    html += '<div class="space-y-3">';
                    html += '<button onclick="handleAnswer(1, \'ë”¸ê¸°\')" class="w-full bg-blue-100 hover:bg-blue-200 text-gray-800 py-4 rounded-xl text-xl font-semibold transition">ë”¸ê¸°</button>';
                    html += '<button onclick="handleAnswer(1, \'í”¼ìŠ¤íƒ€ì¹˜ì˜¤\')" class="w-full bg-blue-100 hover:bg-blue-200 text-gray-800 py-4 rounded-xl text-xl font-semibold transition">í”¼ìŠ¤íƒ€ì¹˜ì˜¤</button>';
                    html += '<button onclick="handleAnswer(1, \'ì´ˆì½”\')" class="w-full bg-blue-100 hover:bg-blue-200 text-gray-800 py-4 rounded-xl text-xl font-semibold transition">ì´ˆì½”</button>';
                    html += '</div></div>';
                } else if (state.currentQuestion === 2) {
                    html += '<div class="space-y-4"><p class="text-2xl font-semibold text-gray-800">ğŸ“ ë”¸ ëŒ€í•™ ì…í•™ ë…„ë„ëŠ”?</p>';
                    html += '<div class="space-y-3">';
                    html += '<button onclick="handleAnswer(2, \'2016\')" class="w-full bg-blue-100 hover:bg-blue-200 text-gray-800 py-4 rounded-xl text-xl font-semibold transition">2016ë…„</button>';
                    html += '<button onclick="handleAnswer(2, \'2017\')" class="w-full bg-blue-100 hover:bg-blue-200 text-gray-800 py-4 rounded-xl text-xl font-semibold transition">2017ë…„</button>';
                    html += '<button onclick="handleAnswer(2, \'2018\')" class="w-full bg-blue-100 hover:bg-blue-200 text-gray-800 py-4 rounded-xl text-xl font-semibold transition">2018ë…„</button>';
                    html += '</div></div>';
                } else if (state.currentQuestion === 3) {
                    html += '<div class="space-y-4"><p class="text-2xl font-semibold text-gray-800">ğŸ“± ì•„ë¹ ê°€ ë”¸ì—ê²Œ ì‚¬ì¤€ ì²« ìŠ¤ë§ˆíŠ¸í° ë¸Œëœë“œëŠ”?</p>';
                    html += '<div class="space-y-3">';
                    html += '<button onclick="handleAnswer(3, \'ì‚¼ì„±\')" class="w-full bg-blue-100 hover:bg-blue-200 text-gray-800 py-4 rounded-xl text-xl font-semibold transition">ì‚¼ì„±</button>';
                    html += '<button onclick="handleAnswer(3, \'ì• í”Œ\')" class="w-full bg-blue-100 hover:bg-blue-200 text-gray-800 py-4 rounded-xl text-xl font-semibold transition">ì• í”Œ</button>';
                    html += '<button onclick="handleAnswer(3, \'LG\')" class="w-full bg-blue-100 hover:bg-blue-200 text-gray-800 py-4 rounded-xl text-xl font-semibold transition">LG</button>';
                    html += '</div></div>';
                } else if (state.currentQuestion === 4) {
                    html += '<div class="space-y-4"><p class="text-2xl font-semibold text-gray-800">ğŸ˜… ì—„ë§ˆê°€ ì•„ë¹  ë‹®ì•„ì„œ ì‹«ì–´í•˜ëŠ” ì ì€?</p>';
                    html += '<div class="space-y-3">';
                    html += '<button onclick="handleAnswer(4, \'í‚¤\')" class="w-full bg-blue-100 hover:bg-blue-200 text-gray-800 py-4 rounded-xl text-xl font-semibold transition">í‚¤</button>';
                    html += '<button onclick="handleAnswer(4, \'ì˜ˆë¯¼í•¨\')" class="w-full bg-blue-100 hover:bg-blue-200 text-gray-800 py-4 rounded-xl text-xl font-semibold transition">ì˜ˆë¯¼í•¨</button>';
                    html += '<button onclick="handleAnswer(4, \'ìŒì•…ì  ì¬ëŠ¥\')" class="w-full bg-blue-100 hover:bg-blue-200 text-gray-800 py-4 rounded-xl text-xl font-semibold transition">ìŒì•…ì  ì¬ëŠ¥</button>';
                    html += '</div></div>';
                } else if (state.currentQuestion === 5) {
                    html += '<div class="space-y-4"><p class="text-2xl font-semibold text-gray-800">ğŸº ë”¸ì´ ê°€ì¥ ì¢‹ì•„í•˜ëŠ” ìˆ  ì¢…ë¥˜ëŠ”?</p>';
                    html += '<div class="space-y-3">';
                    html += '<button onclick="handleAnswer(5, \'ì†Œì£¼\')" class="w-full bg-blue-100 hover:bg-blue-200 text-gray-800 py-4 rounded-xl text-xl font-semibold transition">ì†Œì£¼</button>';
                    html += '<button onclick="handleAnswer(5, \'ë§¥ì£¼\')" class="w-full bg-blue-100 hover:bg-blue-200 text-gray-800 py-4 rounded-xl text-xl font-semibold transition">ë§¥ì£¼</button>';
                    html += '<button onclick="handleAnswer(5, \'ì™€ì¸\')" class="w-full bg-blue-100 hover:bg-blue-200 text-gray-800 py-4 rounded-xl text-xl font-semibold transition">ì™€ì¸</button>';
                    html += '</div></div>';
                } else if (state.currentQuestion === 6) {
                    html += '<div class="space-y-4"><p class="text-2xl font-semibold text-gray-800">ğŸ˜¤ ìš°ë¦¬ ê°€ì¡±ì—ì„œ ì œì¼ ê³ ì§‘ ì„¼ ì‚¬ëŒì€?</p>';
                    html += '<div class="space-y-3">';
                    html += '<button onclick="handleAnswer(6, \'ì—„ë§ˆ\')" class="w-full bg-blue-100 hover:bg-blue-200 text-gray-800 py-4 rounded-xl text-xl font-semibold transition">ì—„ë§ˆ</button>';
                    html += '<button onclick="handleAnswer(6, \'ì•„ë¹ \')" class="w-full bg-blue-100 hover:bg-blue-200 text-gray-800 py-4 rounded-xl text-xl font-semibold transition">ì•„ë¹ </button>';
                    html += '<button onclick="handleAnswer(6, \'ìŠ¹ì•„\')" class="w-full bg-blue-100 hover:bg-blue-200 text-gray-800 py-4 rounded-xl text-xl font-semibold transition">ìŠ¹ì•„</button>';
                    html += '</div></div>';
                } else if (state.currentQuestion === 7) {
                    html += '<div class="space-y-4"><p class="text-2xl font-semibold text-gray-800">ğŸ˜  ì—„ë§ˆê°€ í™”ë‚˜ë©´ í•˜ëŠ” í–‰ë™ì€?</p>';
                    html += '<div class="space-y-3">';
                    html += '<button onclick="handleAnswer(7, \'ì¸ìƒ ì°Œí‘¸ë¥´ê¸°\')" class="w-full bg-blue-100 hover:bg-blue-200 text-gray-800 py-4 rounded-xl text-xl font-semibold transition">ì¸ìƒ ì°Œí‘¸ë¥´ê¸°</button>';
                    html += '<button onclick="handleAnswer(7, \'í•œìˆ¨\')" class="w-full bg-blue-100 hover:bg-blue-200 text-gray-800 py-4 rounded-xl text-xl font-semibold transition">í•œìˆ¨</button>';
                    html += '<button onclick="handleAnswer(7, \'ë…¸ë ¤ë³´ê¸°\')" class="w-full bg-blue-100 hover:bg-blue-200 text-gray-800 py-4 rounded-xl text-xl font-semibold transition">ë…¸ë ¤ë³´ê¸°</button>';
                    html += '</div></div>';
                } else if (state.currentQuestion === 8) {
                    html += '<div class="space-y-4"><p class="text-2xl font-semibold text-gray-800">ğŸ’ ì—„ë§ˆê°€ ì•„ë¹ ì—ê²Œ ê°€ì¥ ë°”ë¼ëŠ” ê±´?</p>';
                    html += '<div class="space-y-3">';
                    html += '<button onclick="handleAnswer(8, \'ì˜¬í•´ ì–µëŒ€ ë²Œê¸°\')" class="w-full bg-blue-100 hover:bg-blue-200 text-gray-800 py-4 rounded-xl text-xl font-semibold transition">ì˜¬í•´ ì–µëŒ€ ë²Œê¸°</button>';
                    html += '<button onclick="handleAnswer(8, \'í¬ë£¨ì¦ˆ ì—¬í–‰\')" class="w-full bg-blue-100 hover:bg-blue-200 text-gray-800 py-4 rounded-xl text-xl font-semibold transition">í¬ë£¨ì¦ˆ ì—¬í–‰</button>';
                    html += '<button onclick="handleAnswer(8, \'ê±´ê°•\')" class="w-full bg-blue-100 hover:bg-blue-200 text-gray-800 py-4 rounded-xl text-xl font-semibold transition">ê±´ê°•</button>';
                    html += '</div></div>';
                } else if (state.currentQuestion === 9) {
                    html += '<div class="space-y-4"><p class="text-2xl font-semibold text-gray-800">ğŸ’™ ë”¸ì´ ì•„ë¹ ì—ê²Œ ê°€ì¥ í•˜ê³  ì‹¶ì€ ë§ì€?</p>';
                    html += '<div class="space-y-3">';
                    html += '<button onclick="handleAnswer(9, \'ìˆ˜ê³ í•˜ì…¨ìŠµë‹ˆë‹¤\')" class="w-full bg-blue-100 hover:bg-blue-200 text-gray-800 py-4 rounded-xl text-xl font-semibold transition">ìˆ˜ê³ í•˜ì…¨ìŠµë‹ˆë‹¤</button>';
                    html += '<button onclick="handleAnswer(9, \'ê°ì‚¬í•©ë‹ˆë‹¤\')" class="w-full bg-blue-100 hover:bg-blue-200 text-gray-800 py-4 rounded-xl text-xl font-semibold transition">ê°ì‚¬í•©ë‹ˆë‹¤</button>';
                    html += '<button onclick="handleAnswer(9, \'ì‚¬ë‘í•©ë‹ˆë‹¤\')" class="w-full bg-blue-100 hover:bg-blue-200 text-gray-800 py-4 rounded-xl text-xl font-semibold transition">ì‚¬ë‘í•©ë‹ˆë‹¤</button>';
                    html += '</div></div>';
                }
                
                html += '</div>';
            }
            
            html += '</div></div>';
            return html;
        }

        function renderFailScreen() {
            return '<div class="min-h-screen bg-black flex items-center justify-center animate-pulse">' + renderSoundToggle() + '<h1 class="text-6xl font-bold text-red-600 animate-shake">ì‹¤íŒ¨ì…ë‹ˆë‹¤.</h1></div>';
        }

        function renderSuccessScreen() {
            if (state.showMessage && !state.creditsFinished) {
                var html = '<div class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 relative overflow-hidden">';
                html += renderSoundToggle();
                html += '<div class="absolute inset-0 overflow-hidden">';
                html += '<div class="w-full flex justify-center animate-credits" style="animation-duration: ' + (MESSAGE_DURATION / 1000) + 's;">';
                html += '<div class="space-y-32 text-7xl leading-relaxed max-w-7xl font-bold text-blue-600 text-center px-8">';
                html += '<div class="space-y-6"><p>ì„¸ìƒì— í•˜ë‚˜ ë°–ì— ì—†ëŠ” ìš°ë¦¬ ì•„ë¹ ì—ê²Œ</p></div>';
                html += '<div class="space-y-6"><p>í•­ìƒ ìš°ë¦¬ ê°€ì¡±ì„ ìœ„í•´</p><p>ì—´ì‹¬íˆ ì¼í•˜ì‹œëŠ”</p><p>ì•„ë¹ !</p></div>';
                html += '<div class="space-y-6"><p>ì´ ì‚¬ì´íŠ¸ë„ ë§Œë“¤ ìˆ˜ ìˆë˜ ê±´</p><p>ë‹¤ì–‘ì„±ì„ ì¡´ì¤‘í•´ì£¼ê³ </p><p>ìƒˆë¡œìš´ ë„ì „ì— ê²ì´ ì—†ëŠ”</p></div>';
                html += '<div class="space-y-6"><p>ë©‹ì§„ ì•„ë¹ ë¥¼ ë³´ê³ </p><p>ë§¤ì¼ ë§¤ì¼ ë³´ê³  ë°°ìš´ ë•ë¶„!</p></div>';
                html += '<div class="space-y-6"><p>ì•„ë¹ ì˜ ìœ ë¨¸ìŠ¤ëŸ¬ìš´ ë†ë‹´ë¶€í„°</p><p>í°ë¨¸ë¦¬ê¹Œì§€</p><p>ì €ì—ê²Œ í° í˜ì´ ë©ë‹ˆë‹¤</p></div>';
                html += '<div class="space-y-6"><p>ì–¸ì œë‚˜ ê±´ê°•í•˜ì‹œê³ </p><p>í–‰ë³µí•˜ì‹œê¸¸ ë°”ëë‹ˆë‹¤</p></div>';
                html += '<div class="space-y-6"><p>ìƒì‹  ì¶•í•˜ë“œë ¤ìš”!</p></div>';
                html += '<div class="space-y-6"><p>ì‚¬ë‘í•©ë‹ˆë‹¤ ì•„ë¹ </p></div>';
                html += '<div class="space-y-6"><p>ğŸ‚ğŸ‰ğŸğŸˆğŸŠğŸ’™</p></div>';
                html += '<div class="h-32"></div>';
                html += '</div></div></div></div>';
                return html;
            }
            
            if (state.creditsFinished && !state.showGiftMessage) {
                return '<div class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center overflow-hidden relative">' + renderSoundToggle() + '<div class="text-center z-20"><p class="text-6xl mb-8 font-bold text-blue-600">ì‘ì€ ì„ ë¬¼ì´ ìˆìŠµë‹ˆë‹¤ ğŸ</p><button onclick="showGiftMessage()" class="bg-blue-500 text-white px-12 py-6 rounded-full text-3xl font-bold hover:bg-blue-600 shadow-2xl animate-bounce">ì„ ë¬¼ í™•ì¸í•˜ê¸° ğŸ’</button></div></div>';
            }
            
            if (state.showGiftMessage && !state.showGiftDetails) {
                return '<div class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center overflow-hidden relative">' + renderSoundToggle() + '<div class="text-center px-8 z-20"><p class="text-5xl mb-8 font-bold text-blue-600">ì¤€ë¹„í–ˆìŠµë‹ˆë‹¤! ğŸ‰</p><button onclick="showGiftDetails()" class="bg-blue-500 text-white px-12 py-6 rounded-full text-3xl font-bold hover:bg-blue-600 shadow-2xl">ê³„ì† ğŸ’™</button></div></div>';
            }
            
            if (state.showGiftDetails) {
                var html = '<div class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center overflow-hidden relative">';
                html += renderSoundToggle();
                
                // Money rain effect
                html += '<div class="absolute inset-0 pointer-events-none z-40">';
                for (var i = 0; i < 30; i++) {
                    html += '<div class="absolute money-rain text-6xl" style="left: ' + (Math.random() * 100) + '%; animation-delay: ' + (Math.random() * 5) + 's; animation-duration: ' + (3 + Math.random() * 4) + 's;">ğŸ’µ</div>';
                }
                html += '</div>';
                
                html += '<div class="text-center px-8 max-w-4xl z-20">';
                html += '<h2 class="text-7xl font-bold text-blue-600 mb-12 animate-pulse">ìƒì¼ ì„ ë¬¼ ğŸ</h2>';
                html += '<div class="bg-white/90 backdrop-blur rounded-3xl shadow-2xl p-16 border-4 border-blue-400">';
                html += '<div class="space-y-8">';
                html += '<p class="text-8xl font-bold text-green-600 animate-bounce">ğŸ’° 100,000ì› ğŸ’°</p>';
                html += '<p class="text-4xl text-gray-700 mt-8">ì£¼ì˜: ì•„ë¹ ë§Œì„ ìœ„í•œ ì„ ë¬¼ì„ ì‚¬ì„¸ìš”! ì•„ë¹ ì™¸ ê°€ì¡±ì´ë‚˜ íƒ€ì¸ì„ ìœ„í•œ ê±°ì— ì“°ë©´ ì†Œë©¸ë©ë‹ˆë‹¤!</p>';
                html += '<p class="text-3xl text-blue-600 font-semibold mt-6">ì‚¬ë‘í•©ë‹ˆë‹¤ ì•„ë¹ ! â¤ï¸</p>';
                html += '</div></div></div></div>';
                return html;
            }
            
            return '';
        }

        function render() {
            const app = document.getElementById('app');
            
            if (state.screen === 'landing') {
                app.innerHTML = renderLandingScreen();
            } else if (state.screen === 'game') {
                app.innerHTML = renderGameScreen();
                const q0Input = document.getElementById('q0-input');
                if (q0Input) {
                    q0Input.addEventListener('input', function(e) {
                        state.q0Answer = e.target.value;
                    });
                }
            } else if (state.screen === 'fail') {
                app.innerHTML = renderFailScreen();
            } else if (state.screen === 'success') {
                app.innerHTML = renderSuccessScreen();
            }
        }

        initFloatingEmojis();
        render();

        // Initialize audio context and start background music on first user interaction
        document.addEventListener('click', function initAudio() {
            if (audioContext.state === 'suspended') {
                audioContext.resume();
            }
            // Start background music
            if (state.musicEnabled && backgroundMusicNodes.length === 0) {
                createBackgroundMusic();
            }
        }, { once: true });
    </script>
</body>
</html>
